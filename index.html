<html>
    <head>
        <title>
            Ubiquit IPv6-RD template generator
        </title>
        <!-- load our ipv4 address as seen by the server -->
        <script type="text/javascript">
            function autofill_ipv4_wan() {
                fetch("/ipaddr").then(response => response.json()).then(data => {
                    document.getElementById("customer_ipv4_wan_addr").value = data["ipaddr"];
                })
            }

            function fill_provider(elem) {
                document.getElementById("isp_ipv6_prefix_str").value = elem.innerText;
            }
        </script>
    </head>
    <body onload="autofill_ipv4_wan()">
        <h1>Enter your network parameters below:</h1>
        <form action="/config.gateway.json" method="get">
            <label for="customer_ipv4_lan_addr">Customer IPv4 LAN address:</label>
            <input type="text" name="customer_ipv4_lan_addr" id="customer_ipv4_lan_addr" placeholder="192.168.0.1"><br/>
            <label for="customer_ipv4_wan_addr">Customer IPv4 WAN address:</label>
            <input type="text" name="customer_ipv4_wan_addr" id="customer_ipv4_wan_addr" placeholder="123.45.67.89"><br/>
            <label for="isp_ipv6_prefix_str">Provider IPv6 prefix (with mask):</label>
            <input type="text" name="isp_ipv6_prefix_str" id="isp_ipv6_prefix_str" placeholder="2602::/24"><br/>
            <input type="submit" value="Generate config.gateway.json">
        </form>

        <h2>Table of known IPv6 provider prefixes:</h2>
        <ul>
            <li>Centurylink: <code onclick="fill_provider(this)">2602::/24</code></li>
        </ul>
    </body>
</html>